<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cutelee: Internationalization and Localization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cutelee
   &#160;<span id="projectnumber">6.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Internationalization and Localization </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cutelee provides tools to make it possible to create templated content in multiple languages and locales. This is known as the concepts of localization and internationalization.</p>
<p>Cutelee can use either the QLocale and QTranslator API provided with Qt, or the KLocale API provided as part of the KDE platform.</p>
<p>For an introduction to Internationalization and Localization see <a href="http://techbase.kde.org/Development/Tutorials/Localization/i18n">http://techbase.kde.org/Development/Tutorials/Localization/i18n</a>.</p>
<p>Using internationalization and localization in Cutelee involves several steps:</p>
<ul>
<li><a class="el" href="i18n_l10n.html#preparing_templates">Preparing templates for localization</a> </li>
<li><a class="el" href="i18n_l10n.html#extracting_strings">Extracting translatable strings from templates.</a> </li>
<li><a class="el" href="i18n_l10n.html#building_translation_catalogs">Building distributable translation catalogs.</a> </li>
<li><a class="el" href="i18n_l10n.html#consuming_translations">Consuming translations in your application.</a> </li>
<li><a class="el" href="i18n_l10n.html#third_party_extended_translations">Third party translation extensions.</a></li>
</ul>
<h1><a class="anchor" id="preparing_templates"></a>
Preparing templates for localization</h1>
<p>The content of templates which is made up of strings, numbers, dates, times and monetary values may be localized.</p>
<p>For strings, this means marking the string as translatable in the template, and using a translation when rendering the template. Strings may be have different structure, pluralization or disambiguation when translated. Strings are marked for translation using the template tags <code>{%&#160;i18n&#160;%}</code>, <code>{%&#160;i18nc&#160;%}</code>, <code>{%&#160;i18np&#160;%}</code> and <code>{%&#160;i18ncp&#160;%}</code>. Additionally, <code>{%&#160;i18n_var&#160;%}</code>, <code>{%&#160;i18nc_var&#160;%}</code>, <code>{%&#160;i18np_var&#160;%}</code> and <code>{%&#160;i18ncp_var&#160;%}</code> may be used to insert a translated string into the context.</p>
<pre class="fragment">  &lt;h1&gt;{% i18n "Subject" %}&lt;/h1&gt;
  &lt;h1&gt;{% i18n "My name is %1" personName %}&lt;/h1&gt;
  &lt;h1&gt;{% i18nc "Subject of an email" "Subject" %}&lt;/h1&gt;
  &lt;h1&gt;{% i18np "%n email(s)" numEmails %}&lt;/h1&gt; &lt;!-- Qt plural form --&gt;
  &lt;h1&gt;{% i18np "%n email" "%n emails" numEmails %}&lt;/h1&gt; &lt;!-- KDE plural form --&gt;

  {% i18n_var "Subject" as subj %}
  &lt;h1&gt;{{ subj }}&lt;/h1&gt;
  {% i18n_var "Subject of an email" "Subject" as subj %}
  &lt;h1&gt;{{ subj }}&lt;/h1&gt;

  ... etc.
</pre><p>Each of the template tags may take additional arguments which will be substituted into the finalized string.</p>
<p>The QLocale and KLocale systems are notably different in how they process plurals. Both forms are supported by Cutelee, but only one form can be used for a particular application for consistency.</p>
<p>As a shortcut to the <code>i18n</code> tag with no arguments, the <code>_()</code> syntax may be used. Substitution arguments, disambiguation context, and plurals cannot be used in this case. The <code>_()</code> form can be used with any variable and may form part of a filter expression.</p>
<pre class="fragment">  &lt;h1&gt;{{ _("Subject") }}&lt;/h1&gt;

  {% i18n "The %1 is %2" _("Subject") messageSubject %}

  &lt;h1&gt;{{ _("Subject")|lower }}&lt;/h1&gt;

  {% with someList|join:_("some i18n'd var") as result %}
  {{ result }}
</pre><p>Dates and times, numbers and monetary values are represented differently in different countries and locales. For example, in the US, dates are represented as m/d/yy, so that the 4th May 2006 is written as 5/4/06. In British locales however, dates are represented as dd/mm/yyyy, for example 04/05/2006. Other locales are different again, such as Germany which would write the same date as 04.05.06. Similarly, the use of thousand separators and decimal separators is different between locales, such that 100,001 means "One hundred thousand and one" in English locales, but it means "one hundred point zero zero one" in German locales. "One hundred thousand and one" in German locales would be written as 100.001.</p>
<p>The <code>_()</code> syntax can also be used to localize any data object to format it correctly for the target locale.</p>
<pre class="fragment">  {% i18n "The date of the message is %1, the time of the message is %2" _(messageDate) _(messageTime) %}

  {{ _(10000) }}, {{ _(someNumber) }}
</pre><p>Some features of the Cutelee i18n and l10n system are aimed at KLocale API which is not available with Qt. For example, the QLocale system does not have a machanism for formatting monetary values, but KLocale does. Cutelee provides support for that in the form of the <code>l10n_money</code> template tag.</p>
<pre class="fragment">  {% l10n_money 10000 "USD" %}

  {% l10n_money someValue "EUR" %}
</pre><h1><a class="anchor" id="extracting_strings"></a>
Extracting translatable strings from templates.</h1>
<p>Cutelee provides scripts for extracting translatable strings from templates. The scripts generate C++ files as output, which can then be processed with standard tools such as <code>lupdate</code> or <code>xgettext</code>. The <code>lrelease</code> and <code>xgettext</code> executables create <code>.ts</code> and <code>.po</code> language respectively. It is quite simple to automate the extraction of translatable strings in your build process.</p>
<h1><a class="anchor" id="building_translation_catalogs"></a>
Building distributable translation catalogs.</h1>
<p>Translators use standard tools for translating strings, such as Qt Linguist, or Lokalize for translating in gettext based systems.</p>
<p>Translation catalogs are built using standard tools, such as <code>lrelease</code> or <code>msgfmt</code>. Description of these tools is out of scope of Cutelee, but are described elsewhere.</p>
<h1><a class="anchor" id="consuming_translations"></a>
Consuming translations in your application.</h1>
<p>Internationalized data can be accessed and used in applications by setting an <a class="el" href="classCutelee_1_1AbstractLocalizer.html" title="Interface for implementing an internationalization system.">AbstractLocalizer</a> object on the <a class="el" href="classCutelee_1_1Context.html" title="The Context class holds the context to render a Template with.">Context</a> used to render the <a class="el" href="classCutelee_1_1Template.html" title="The Template class is a tree of nodes which may be rendered.">Template</a>.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> t = getTemplate();</div>
<div class="line"><span class="keyword">auto</span> c = getContext();</div>
<div class="line"> </div>
<div class="line">QLocale deLocale(QLocale::German, QLocale::Germany);</div>
<div class="line"><span class="keyword">auto</span> deLocalizer = std::shared_ptr&lt;QtLocalizer&gt;::create(deLocale);</div>
<div class="line"> </div>
<div class="line">c.setLocalizer(deLocalizer);</div>
<div class="line">t-&gt;render(&amp;c); <span class="comment">// Render the template with the de locale.</span></div>
<div class="line"> </div>
<div class="line">QLocale frLocale(QLocale::French, QLocale::France);</div>
<div class="line"><span class="keyword">auto</span> frLocalizer = std::shared_ptr&lt;QtLocalizer&gt;::create(frLocale);</div>
<div class="line"> </div>
<div class="line">c.setLocalizer(frLocalizer);</div>
<div class="line">t-&gt;render(&amp;c); <span class="comment">// Render the same template with the fr locale.</span></div>
</div><!-- fragment --><h1><a class="anchor" id="third_party_extended_translations"></a>
Third party translation extensions.</h1>
<p>Third party providers of templates, such as themes may wish to add their own translatable content.</p>
<p>In such cases, it is necessary for the theme writer to provide the translation files along with their templates.</p>
<p>To consume such third party templates it is necessary to set the localizer on the <a class="el" href="classCutelee_1_1FileSystemTemplateLoader.html" title="The FileSystemTemplateLoader loads Templates from the file system.">FileSystemTemplateLoader</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The same localizer object must be used with the template loader and the <a class="el" href="classCutelee_1_1Context.html" title="The Context class holds the context to render a Template with.">Context</a> object. It can therefore be useful to store them as members.</dd></dl>
<div class="fragment"><div class="line">SomeClass::SomeClass()</div>
<div class="line">{</div>
<div class="line">  m_deLocalizer(<span class="keyword">new</span> QtLocalizer(deLocale));</div>
<div class="line"> </div>
<div class="line">  m_loader(<span class="keyword">new</span> FileSystemTemplateLoader);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// ...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classQString.html">QString</a> SomeClass::render()</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">auto</span> c = getContext();</div>
<div class="line">  <span class="keyword">auto</span> t = getTemplate();</div>
<div class="line"> </div>
<div class="line">  m_loader.setLocalizer(m_deLocalizer);</div>
<div class="line">  c.setLocalizer(m_deLocalizer);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> t-&gt;render(&amp;c);</div>
<div class="line">}</div>
<div class="ttc" id="aclassQString_html"><div class="ttname"><a href="classQString.html">QString</a></div><div class="ttdef"><b>Definition:</b> <a href="operatorcasttests_8cpp_source.html#l00023">operatorcasttests.cpp:24</a></div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
